$(document).ready(function(){$("input").on("click",function(){this.select()}),$("input").on("keyup",function(e){13==e.keyCode&&send()}),$("#btnSend").on("click",function(){send()}),$("#operation").on("change",function(){$("#resBody").empty().html('<span class="text-secondary">The data does not exist.</span>');var e=$(this).val();$("div[id^='setForm_']").addClass("d-none"),$("#setForm_"+e).removeClass("d-none");var t=$("#"+e+"Form [id='uri']").val();$("#"+e+"Form [id='setUri']").val(""),$("#"+e+"Form [id='setUri']").val(t+"/"+e)})});var send=function(){var e=$("#api").text(),t=$("#api_id").text(),a=$("#form").serializeObject();if("kairspec"==e){var s=$("#operation").val();if(!s)return alert("Warn> Make a choice [Operation]"),$("#operation").focus(),!1;$("#setOperation").remove(),$("<input>").attr({type:"hidden",id:"setOperation",name:"setOperation",value:s}).appendTo($("#"+s+"Form")),a=$("#"+s+"Form").serializeObject()}$("#resBody").empty().append("<div class='spinner-border spinner-border-sm' role='status'></div><span><h6 class=\"text-secondary pl-1 d-inline\"> Loading...</h6></span>"),$.ajax({method:"POST",url:"/send",dataType:"JSON",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:a,success:function(a){var s=0,o=a.header.resultCode,n=a.header.resultMsg;if("00"!=o)return alert("Error> "+o+":"+n),!1;if(cnt=0,resResult="","kairspec"==e){switch(t){case"SCOA0901":s=a.body.totalCount;break;case"SCOA0902":s=a.body.numOfRows;break;default:s=a.body.numOfRows}a.body.totalCount>0?$.each(a.body.items[["item"]],function(e,t){s>1?(cnt=0,$.each(t,function(e,t){resResult+=setResForm(cnt,e,t),cnt++})):resResult+=setResForm(cnt,e,t),cnt++}):resResult+='<span class="text-secondary">There are no search results.</span>'}$("#resBody").empty().append(resResult)},error:function(e){alert("Error>"+e)}})},setResForm=function(e,t,a){var s='<div class="accordion" id="accordionExample"></div><div class="accordion-item">';return 0==cnt?(s+='<h2 class="accordion-header" id="heading'+e+'"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse'+e+'" aria-expanded="false" aria-controls="collapse'+e+'">',s+=a,s+="</button></h2>"):(s+='<div id="collapse'+e+'" class="accordion-collapse collapse show" aria-labelledby="heading'+e+'" data-bs-parent="#accordionExample">',s+='<div class="accordion-body">',s+='<div class="row" style="margin:-20px;">',s+='<label class="col-sm-2 col-form-label">'+t+"</label>",s+='<div class="col-sm-10">',s+='<input type="text" class="form-control-plaintext text-secondary" value="'+a+'" disabled>',s+="</div>",s+="</div>",s+="</div>",s+="</div>"),s+="</div></div>"},submit=function(e,t="POST",a="json"){var s=$("#form").serializeObject();$.ajax({method:t,url:"/api/"+e+"/"+a,dataType:"JSON",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:s,success:function(e){if("json"==a){var t=JSON.stringify(e);JSON.parse(t)}apiList="",$.each(e,function(){apiList+="<tr>",apiList+="<td>"+this._id+"</td>",apiList+="<td>"+this.reqdate+"</td>",apiList+="<td>"+this.updated_at+"</td>",apiList+="</tr>"}),$("#apiListBody").empty().append(apiList)},error:function(e){alert("Error>"+e)}})};
