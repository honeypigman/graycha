$(function(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(s){return new bootstrap.Tooltip(s)});var s=1,t=$("#tabs").tabs();$("#issueArea").addClass("active"),$("#issueList").empty().html('<div class="set-spinner text-center"><div class="spinner-grow text-primary" role="status"><span class="visually-hidden">Loading...</span></div><div class="spinner-grow text-warning" role="status"><span class="visually-hidden">Loading...</span></div><div class="spinner-grow text-success" role="status"><span class="visually-hidden">Loading...</span></div><div class="spinner-grow text-danger" role="status"><span class="visually-hidden">Loading...</span></div></div>'),$.ajax({method:"POST",url:"/blper/issue",dataType:"JSON",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(s){if("0000"==s.code){var t="";$.each(s.items,function(){t+="<div class='item-list' data-site='"+this.site+"' data-title=\""+this.title+"\" data-link='"+this.link+"'>",t+="<span class='item-skip' title='"+this.title+"'>",t+="<img class='list_log'src='/img/icon/logo-"+this.site+".png'>"+this.title,t+="</span>",t+="<span class='item-date'>"+this.date+"</span>",t+="</div>"}),$("#issueList").empty().append(t)}else $("#issueList").empty().append("<div class='set-top text-muted'>- 검색결과 없음 -</div>")},error:function(s){console.log("Error>"+s)}}),$("#keywordArea").addClass("active"),$("#keywordList").empty().html('<div class="set-spinner text-center"><div class="spinner-grow text-primary" role="status"><span class="visually-hidden">Loading...</span></div><div class="spinner-grow text-warning" role="status"><span class="visually-hidden">Loading...</span></div><div class="spinner-grow text-success" role="status"><span class="visually-hidden">Loading...</span></div><div class="spinner-grow text-danger" role="status"><span class="visually-hidden">Loading...</span></div></div>'),$.ajax({method:"POST",url:"/blper/keyword",dataType:"JSON",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(s){if("0000"==s.code){var t="";$.each(s.items,function(){new Date(this.date),t+="<div class='item-list' data-path='hotkey' data-site='"+this.site+"' data-title=\""+this.title+'">',t+="<span class='item-skip' title='"+this.title+"'>",t+="<img class='list_log'src='/img/icon/logo-"+this.site+".png'>"+this.title,t+="</span>",t+="<span class='item-link float-end px-1' data-link='"+this.link+"'><svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-external-link'><path d='M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6'></path><polyline points='15 3 21 3 21 9'></polyline><line x1='10' y1='14' x2='21' y2='3'></line></svg></span>",t+="</div>"}),$("#keywordList").empty().append(t)}else $("#keywordList").empty().append("<div class='set-top text-muted'>- 검색결과 없음 -</div>")},error:function(s){console.log("Error>"+s)}}),$("#kw0").focus(),$(".keywordInput").on("click",function(){this.select()}),$(".keywordInput").on("keypress",function(s){var r=a("kw0");if(13===s.keyCode&&i()){var l=n(r);e("GO",t,l)}}),$("#go").on("click",function(){var s=a("kw0");if(i()){var r=n(s);e("GO",t,r)}}),$("#reset").on("click",function(){location.reload()}),$("#views").on("click",function(){$("#viewsModalBody").empty(),$.ajax({method:"POST",url:"/blper/views",dataType:"JSON",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(s){var t="";$.each(s,function(){var s="",e=4*Math.random();switch(Math.floor(e)+1){case 1:s="primary";break;case 2:s="secondary";break;case 3:s="success";break;case 4:s="dark";break;default:s="primary"}t+="<button type='button' class='btn btn-outline-"+s+" m-1'>"+this.query+"</button>"}),$("#viewsModalBody").empty().append(t)},error:function(s){console.log("Error>"+s)}})}),$(document).on("click",".se-module-text",function(s){var t=parseInt($("#copyCnt").text());$("#copyCnt").text(t+1)}),$(document).on("click",".relation-word",function(s){$("#kw0").val($(this).text());var i=n(a("kw0"));e("ADD",t,i)}),t.on("click","svg.feather-x",function(){var s=$(this).closest("li").remove().attr("aria-controls");$("#"+s).remove(),t.tabs("refresh")}),$(document).on("click",".item-list",function(s){var r=$(this).data("path"),l=$(this).data("link"),o=$(this).data("title");if("hotkey"==r){$("#kw0").val(o);var d=a("kw0");if(i()){var c=n(d);e("GO",t,c)}}else window.open(l);return!1}),$(document).on("click",".item-link",function(s){var t=$(this).data("link");return window.open(t),!1});var e=function(s=null,t=null,e=null){$("main").animate({scrollTop:0,scrollLeft:0},300),$("#tabs").addClass("active"),$("#wordArea").addClass("active");var a=$("#form").serialize();$.ajax({method:"POST",url:"/blper/find",dataType:"JSON",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:a,success:function(a){if("0000"==a.code){var i="";$.each(a.items,function(){i+="<div class='item-list' data-site='"+this.site+"' data-title=\""+this.title+"\" data-link='"+this.link+"' style='cursor:pointer'>",i+="<span class='item-skip' title='"+this.title+"'>",i+="<img class='list_log'src='/img/icon/logo-"+this.site+".png'>"+this.title,i+="</span>",i+="<span class='item-date'>"+this.date+"</span>",i+="</div>"});var n="";$.each(a.words,function(){n+="<div class='relation-word word-list'><span class='text-word'>"+this.text+"</span></div>",0}),e&&($("#"+e).remove(),t.append("<div id='"+e+"' class='tab-form'>"+i+"</div>"),t.tabs("refresh"),"GO"==s&&$("#wordList").empty().append(n),$("b").css({color:"#fa8ba0"})),a.views>0&&$("#views").empty().text(a.views)}else if("9998"==a.code){alert("검색 제한 횟수 초과!");var r=$("#tab-nav > li").first().remove().attr("aria-controls");$("#"+r).remove(),t.tabs("refresh"),$("#tabs").removeClass("active"),$("#wordArea").removeClass("active"),$("#wordList").empty()}else{console.log("Tabs ID["+a.code+"] = "+e);var l="<div id='"+e+"' class='set-top text-muted'>- 검색결과 없음 -</div>";$("#"+e).remove(),t.append(l),t.tabs("refresh"),$("#wordList").empty().append(l)}},error:function(s){console.log("Error>"+s)}})};function a(s){var t=null;if((t=$("#"+s).val().replace(/[^ㄱ-ㅎ|ㅏ-ㅣ|가-힣a-z0-9\u318D\u119E\u11A2\u2022\u2025a\u00B7\uFE55\s-,. ]/gi,"")).replace(/ /g,""))return $("#"+s).val(t),t;$("#"+s).focus(),$("#"+s).val("")}function i(){var s=!1;return $("#kw0").val()&&($("#tab-nav").css({display:"block"}),$("#wordTitle").css({display:"block"}),$("#wordList").empty().html('<div class="set-spinner text-center"><div class="spinner-grow text-primary" role="status"><span class="visually-hidden">Loading...</span></div><div class="spinner-grow text-warning" role="status"><span class="visually-hidden">Loading...</span></div><div class="spinner-grow text-success" role="status"><span class="visually-hidden">Loading...</span></div><div class="spinner-grow text-danger" role="status"><span class="visually-hidden">Loading...</span></div></div>'),s=!0),s}function n(e){var a="tab-content-"+s,i=$("<li><a href='#{href}'># #{word}</a> <svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-x' style='margin:5px 5px 0 -8px;'><line x1='18' y1='6' x2='6' y2='18'></line><line x1='6' y1='6' x2='18' y2='18'></line></svg></li>".replace(/#\{href\}/g,"#"+a).replace(/#\{word\}/g,e));return t.find(".ui-tabs-nav").prepend(i),t.append("<div id='"+a+'\' class=\'tab-form\'><div class="set-spinner text-center"><div class="spinner-grow text-primary" role="status"><span class="visually-hidden">Loading...</span></div><div class="spinner-grow text-warning" role="status"><span class="visually-hidden">Loading...</span></div><div class="spinner-grow text-success" role="status"><span class="visually-hidden">Loading...</span></div><div class="spinner-grow text-danger" role="status"><span class="visually-hidden">Loading...</span></div></div></div>'),t.tabs("refresh"),t.tabs({active:0}),s++,a}});
